#!/usr/bin/env bash
#####################################################################################################################################################################################################
# Project:       Juniper
# Sub-Project:   JuniperCanopy
# Application:   juniper_canopy
# Purpose:       Monitoring and Diagnostic Frontend for Cascade Correlation Neural Network
#
# Author:        Paul Calnon
# Version:       0.1.4 (0.7.3)
# File Name:     logging_functions.conf
# File Path:     <Project>/<Sub-Project>/<Application>/conf/
#
# Date:          2025-12-18
# Last Modified: 2025-12-25
#
# License:       MIT License
# Copyright:     Copyright (c) 2024,2025,2026 Paul Calnon
#
# Description:
#    This config file defines the functions needed by the logging config file for the Juniper Project's juniper_canopy prototype
#    Warning:  This Script / Config file is sourced by the init.conf script
#
#####################################################################################################################################################################################################
# Notes:
#     Warning:  This Config file is sourced by the logging.conf script which, itself, is sourced by the init.conf file.
#     The init.conf file is, in turn, sourced by all Juniper Canopy util scripts including the try.bash and get_code_stats.bash scripts
#
#####################################################################################################################################################################################################
# References:
#
#####################################################################################################################################################################################################
# TODO :
#
#####################################################################################################################################################################################################
# COMPLETED:
#
#####################################################################################################################################################################################################


#####################################################################################################################################################################################################
# Define Debug Constants
#####################################################################################################################################################################################################
export TRUE="0"
export FALSE="1"

# export DEBUG="${TRUE}"
export DEBUG="${FALSE}"


# #####################################################################################################################################################################################################
# # Check if this config file has already been sourced.  Only Source this conf file Once
# #####################################################################################################################################################################################################
if [[ "${JUNIPER_LOGGING_FUNCTIONS_CONF_SOURCED}" != "${TRUE}" ]]; then
    JUNIPER_LOGGING_FUNCTIONS_CONF_SOURCED="${TRUE}"
else
    log_warning "logging_functions.conf already sourced.  Skipping re-source."
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( TRUE )) || return $(( TRUE ))
fi


#####################################################################################################################################################################################################
# Helper functions that retrieve and validate init conf, calling script, and logging environment information
#####################################################################################################################################################################################################
function get_calling_script_info() {
    local SCRIPT_NAME_ID="$1"
    # shellcheck disable=SC2155
    export CALLING_PATH="$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")"
    # shellcheck disable=SC2155
    export CALLING_DIR="$(dirname "${CALLING_PATH}")"
    return $(( TRUE ))
}

function get_application_info() {
    local CALLING_PATH="$1"
    # shellcheck disable=SC2155
    export APP_DIR="$(dirname "${CALLING_PATH}")"
    # shellcheck disable=SC2155
    export APP_NAME="$(basename "${APP_DIR}")"
    return $(( TRUE ))
}

function get_logs_dir() {
    local APP_PATH="$1"
    local LOGGING_DIR_NAME="$2"
    # shellcheck disable=SC2155
    export LOG_DIR="$(dirname "${APP_PATH}")/${LOGGING_DIR_NAME}"
    [[ ( "${LOG_DIR}" != "" ) || ( ! -d "${LOG_DIR}" ) ]] && mkdir -p "${LOG_DIR}"
    return $(( TRUE ))
}

function get_unique_log_label() {
    # shellcheck disable=SC2155
    export UNIQUE_LABEL="_$(date +%F_%T)"
    return $(( TRUE ))
}

function get_log_filename() {
    local FILE_NAME="$1"
    local FILE_EXT="$2"
    local UNIQUE_LABEL="$3"
    export LOG_FILENAME="${FILE_NAME}${UNIQUE_LABEL}.${FILE_EXT}"
    return $(( TRUE ))
}

function check_log_file(){
    local FILENAME="$1"
    local DIR_NAME="$2"
    local LOG_FILE="${DIR_NAME}/${FILENAME}"
    [[ -z "${LOG_FILE}" || ! -f "${LOG_FILE}" ]] && return $(( FALSE )) || return $(( TRUE ))
}

function get_valid_filename() {
    local APP_NAME="$1"
    local LOG_EXT="$2"
    local LOGGING_DIR="$3"
    get_log_filename "${APP_NAME}" "${LOG_EXT}"
    if ! check_log_file "${LOG_FILENAME}" "${LOGGING_DIR}"; then
        UNIQUE_LABEL="" && get_unique_log_label
        get_log_filename "${LOG_FILENAME%.*}" "${LOG_FILENAME##*.}" "${UNIQUE_LABEL}"
    fi
    return $(( TRUE ))
}

function get_log_file() {
    local APP_NAME="$1"
    local APP_DIR="$2"
    local LOG_EXT="$3"
    local LOG_DIR_NAME="$4"
    get_logs_dir "${APP_DIR}" "${LOG_DIR_NAME}"
    get_valid_filename "${APP_NAME}" "${LOG_EXT}" "${LOG_DIR}"
    export LOG_FILE="${LOG_DIR}/${LOG_FILENAME}"

    [[ ( "${LOG_DIR}" == "" ) || ( ! -d "${LOG_DIR}" ) ]] && log_fatal "LOG_DIR constant is empty or invalid. Unable to create and validate log file"
    [[ ${LOG_FILE} == "" ]] && log_fatal "LOG_FILE constant is empty, Unable to create and validate log file"
    [[ ! -f "${LOG_FILE}" ]] && touch "${LOG_FILE}"
    [[ ! -f "${LOG_FILE}" ]] && return $(( FALSE )) || return $(( TRUE ))
}

function get_log_env_info() {
    local LOG_EXT="$1"
    local LOGGING_DIR="$2"
    local SCRIPT_NAME_ID="$3"
    get_calling_script_info "${SCRIPT_NAME_ID}"
    get_application_info "${CALLING_DIR}"
    get_log_file "${APP_NAME}" "${APP_DIR}" "${LOG_EXT}" "${LOG_DIR_NAME}"; SUCCESS="$?"
    return $(( SUCCESS ))
}

function init_logging_env() {
    get_log_env_info "${LOG_EXT}" "${LOG_DIR}" "${SCRIPT_NAME_ID}"; SUCCESS="$?"
    return $(( SUCCESS ))
}

function is_defined() {
    declare -F "$1" &> /dev/null
}


#####################################################################################################################################################################################################
# Export Function Definitions
#####################################################################################################################################################################################################
export -f get_calling_script_info
export -f get_application_info
export -f get_logs_dir
export -f get_unique_log_label
export -f get_log_filename
export -f check_log_file
export -f get_valid_filename
export -f get_log_file
export -f get_log_env_info
export -f init_logging_env
export -f is_defined


#####################################################################################################################################################################################################
# # Define Logging Helper functions
#####################################################################################################################################################################################################
function logger() {
    # local LOG_PARENT="${1}"
    LOG_PARENT="${1}"
    # local LOG_LINE="${2}"
    LOG_LINE="${2}"
    # local LOG_FUNC="${3}"
    LOG_FUNC="${3}"
    # local LOG_LABEL="${4}"
    LOG_LABEL="${4}"
    # local LOG_MESSAGE="${5}"
    LOG_MESSAGE="${5}"
    # local LOG_COLOR="${6}"
    LOG_COLOR="${6}"
    printf "%b%-21s %-28s %-23s %-11s %s%b\n" "${LOG_COLOR}" "($(date +%F_%T))" "${LOG_PARENT}:($LOG_LINE):" "${LOG_FUNC}:" "${LOG_LABEL}" "${LOG_MESSAGE}" "${RESET}" | tee -a "${LOG_FILE}" >&2
    return $(( TRUE ))
}

function debug_flag_matters() {
    # local LOG_LEVEL_NUM="${1}"
    LOG_LEVEL_NUM="${1}"
    [[ "${DEBUG}" == "${TRUE}" ]] && (( LOG_LEVEL_NUM >= DEBUG_NUM )) && return $(( TRUE )) || return $(( FALSE ))
}

function display_level_matters() {
    # local LOG_LEVEL_NUM="${1}"
    LOG_LEVEL_NUM="${1}"
    # local DISPLAY_LEVEL_NUM="${2}"
    DISPLAY_LEVEL_NUM="${2}"
    (( LOG_LEVEL_NUM <= DISPLAY_LEVEL_NUM )) && return $(( TRUE )) || return $(( FALSE ))
}

function evaluate_log_level() {
    # local DISPLAY_LEVEL_NUM="${1}"
    DISPLAY_LEVEL_NUM="${1}"
    # local LOG_LEVEL_NUM="${2}"
    LOG_LEVEL_NUM="${2}"
    ( debug_flag_matters "${LOG_LEVEL_NUM}" || display_level_matters "${LOG_LEVEL_NUM}" "${DISPLAY_LEVEL_NUM}" ) && return $(( TRUE )) || return $(( FALSE ))
}


#####################################################################################################################################################################################################
# Export Logging Helper Functions (required for subshell access)
#####################################################################################################################################################################################################
export -f logger
export -f debug_flag_matters
export -f display_level_matters
export -f evaluate_log_level


#####################################################################################################################################################################################################
# Define custom level logging functions
#########################################################################################}
function log_trace() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_TRACE}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_TRACE}" || TERM_STATUS="$3"
    evaluate_log_level "${TRACE_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    # shellcheck disable=SC2155
    CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    # local CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    # local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    # local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    # shellcheck disable=SC2153
    COLOR_CODE="${LOG_COLORS[${TRACE_LEVEL}]}"
    # local COLOR_CODE="${LOG_COLORS[${TRACE_LEVEL}]}"
    # shellcheck disable=SC2153
    LOG_LABEL="${LOG_LABELS[${LOG_LEVEL}]}"
    # local LOG_LABEL="${LOG_LABELS[${LOG_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && { set -e; exit $(( EXIT_STATUS )); }
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function log_verbose() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_VERBOSE}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_VERBOSE}" || TERM_STATUS="$3"
    evaluate_log_level "${VERBOSE_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    # shellcheck disable=SC2155
    CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    #local CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    #local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    #local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    COLOR_CODE="${LOG_COLORS[${VERBOSE_LEVEL}]}"
    #local COLOR_CODE="${LOG_COLORS[${VERBOSE_LEVEL}]}"
    LOG_LABEL="${LOG_LABELS[${LOG_LEVEL}]}"
    #local LOG_LABEL="${LOG_LABELS[${LOG_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && { set -e; exit $(( EXIT_STATUS )); }
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function log_debug() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_DEBUG}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_DEBUG}" || TERM_STATUS="$3"
    evaluate_log_level "${DEBUG_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    # shellcheck disable=SC2155
    CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    #local CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    #local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    #local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    COLOR_CODE="${LOG_COLORS[${DEBUG_LEVEL}]}"
    #local COLOR_CODE="${LOG_COLORS[${DEBUG_LEVEL}]}"
    LOG_LABEL="${LOG_LABELS[${LOG_LEVEL}]}"
    #local LOG_LABEL="${LOG_LABELS[${LOG_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && { set -e; exit $(( EXIT_STATUS )); }
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function log_info() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_INFO}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_INFO}" || TERM_STATUS="$3"
    evaluate_log_level "${INFO_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    # shellcheck disable=SC2155
    CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    # local CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    # local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    # local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    COLOR_CODE="${LOG_COLORS[${INFO_LEVEL}]}"
    # local COLOR_CODE="${LOG_COLORS[${INFO_LEVEL}]}"
    LOG_LABEL="${LOG_LABELS[${INFO_LEVEL}]}"
    # local LOG_LABEL="${LOG_LABELS[${INFO_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && { set -e; exit $(( EXIT_STATUS )); }
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function log_warning() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_WARNING}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_WARNING}" || TERM_STATUS="$3"
    evaluate_log_level "${WARNING_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    # shellcheck disable=SC2155
    CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    # local CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    # local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    # local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    COLOR_CODE="${LOG_COLORS[${WARNING_LEVEL}]}"
    # local COLOR_CODE="${LOG_COLORS[${WARNING_LEVEL}]}"
    LOG_LABEL="${LOG_LABELS[${WARNING_LEVEL}]}"
    # local LOG_LABEL="${LOG_LABELS[${WARNING_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && { set -e; exit $(( EXIT_STATUS )); }
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function log_error() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_ERROR}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_ERROR}" || TERM_STATUS="$3"
    evaluate_log_level "${ERROR_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    # shellcheck disable=SC2155
    CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    # local CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    # local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    # local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    COLOR_CODE="${LOG_COLORS[${ERROR_LEVEL}]}"
    # local COLOR_CODE="${LOG_COLORS[${ERROR_LEVEL}]}"
    LOG_LABEL="${LOG_LABELS[${ERROR_LEVEL}]}"
    # local LOG_LABEL="${LOG_LABELS[${ERROR_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && { set -e; exit $(( EXIT_STATUS )); }
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function log_critical() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_CRITICAL}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_CRITICAL}" || TERM_STATUS="$3"
    evaluate_log_level "${CRITICAL_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    # shellcheck disable=SC2155
    CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    # local CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    # local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    # local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    COLOR_CODE="${LOG_COLORS[${CRITICAL_LEVEL}]}"
    # local COLOR_CODE="${LOG_COLORS[${CRITICAL_LEVEL}]}"
    LOG_LABEL="${LOG_LABELS[${CRITICAL_LEVEL}]}"
    # local LOG_LABEL="${LOG_LABELS[${CRITICAL_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && { set -e; exit $(( EXIT_STATUS )); }
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function log_fatal() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_FATAL}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_FATAL}" || TERM_STATUS="$3"
    evaluate_log_level "${FATAL_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    # shellcheck disable=SC2155
    CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    # local CALLING_SCRIPT="$(basename "$(realpath "${BASH_SOURCE[${SCRIPT_NAME_ID}]}")")"
    CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    # local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    # local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    COLOR_CODE="${LOG_COLORS[${FATAL_LEVEL}]}"
    # local COLOR_CODE="${LOG_COLORS[${FATAL_LEVEL}]}"
    LOG_LABEL="${LOG_LABELS[${FATAL_LEVEL}]}"
    # local LOG_LABEL="${LOG_LABELS[${FATAL_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && { set -e; exit $(( EXIT_STATUS )); }
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}


#####################################################################################################################################################################################################
# Export logging functions to calling script
#####################################################################################################################################################################################################
export -f is_defined
export -f log_trace
export -f log_verbose
export -f log_debug
export -f log_info
export -f log_warning
export -f log_error
export -f log_critical
export -f log_fatal

[[ "${DEBUG}" == "${TRUE}" ]] && exit $(( TRUE )) || return $(( TRUE ))
