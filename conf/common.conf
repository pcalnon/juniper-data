#!/usr/bin/env bash
#####################################################################################################################################################################################################
# Project:       Juniper
# Sub-Project:   JuniperCanopy
# Application:   juniper_canopy
# Purpose:       Monitoring and Diagnostic Frontend for Cascade Correlation Neural Network
#
# Script Name:   common.cfg
# Script Path:   <Project>/<Sub-Project>/<Application>/conf/
# Conf File:     common.conf   ???  # TODO: add common conf file name here
# Conf Path:     <Project>/<Sub-Project>/<Application>/conf/  # TODO: Add parent project dir
#
# Author:        Paul Calnon
# Version:       1.0.0
#
# Date:          2025-09-16
# Last Modified: 2025-12-17
#
# License:       MIT License
# Copyright:     Copyright (c) 2024,2025,2026 Paul Calnon
#
# Description:
#     This config file is sourced to define global constants used in project util scripts
#
#####################################################################################################################################################################################################
# Notes:
#     This script functions as a Common config file for all scripts in the current Project/Sub-Project/Application_Name dir
#
#     Warning:
#         This config file is sourced by the config files for the api_request.bash and launch_close.bash scripts.
#
#####################################################################################################################################################################################################
# References:
#
#     SCRIPT_PATH="$(realpath "${BASH_SOURCE[0]}")"
#     CONF_PATH="$(dirname "$(dirname "${SCRIPT_PATH}")")/conf"
#     CONF_FILENAME="$(basename -s ".bash" "${SCRIPT_PATH}").conf"
#     CONF_FILE="${SCRIPT_PATH}/${SCRIPT_FILENAME}"
#
#     CONF_PATH="$(dirname "$(dirname "$(realpath "${BASH_SOURCE[0]}")")")/conf"
#     CONF_FILENAME="$(basename -s ".bash" "$(realpath "${BASH_SOURCE[0]}")").conf"
#     CONF_FILE="${CONF_PATH}/${CONF_FILENAME}"
#
#     CONF_FILE="$(dirname "$(dirname "$(realpath "${BASH_SOURCE[0]}")")")/conf/$(basename -s ".bash" "$(realpath "${BASH_SOURCE[0]}")").conf"
#
#     source "${CONF_FILE}";  SUCCESS="$?"
#
#####################################################################################################################################################################################################
# TODO :
#
#####################################################################################################################################################################################################
# COMPLETED:
#
#####################################################################################################################################################################################################


#####################################################################################################################################################################################################
# Define Boolean Constants
#####################################################################################################################################################################################################
export TRUE="0"
export FALSE="1"


#####################################################################################################################################################################################################
# Only Source this conf file Once
#####################################################################################################################################################################################################
# export COMMON_CONF_SOURCED="${FALSE}"

if [[ "${COMMON_CONF_SOURCED}" != "${TRUE}" ]]; then
    export COMMON_CONF_SOURCED="${TRUE}"
    # echo "Sourcing common.conf ..."
else
    log_warning "common.conf already sourced.  Skipping re-source."
    return "${TRUE}"
fi

#####################################################################################################################################################################################################
# Define Global Language Constants
#####################################################################################################################################################################################################
export RUST_LANGUAGE_NAME="rust"
export PYTHON_LANGUAGE_NAME="python"
export CPP_LANGUAGE_NAME="c++"

# export LANG_NAME="${RUST_LANGUAGE_NAME}"
export LANG_NAME="${PYTHON_LANGUAGE_NAME}"
# export LANG_NAME="${CPP_LANGUAGE_NAME}"


#####################################################################################################################################################################################################
# Define Juniper Project Constants
#####################################################################################################################################################################################################
export JUNIPER_PROJECT_NAME="Juniper"
export JUNIPER_APPLICATION_VERSION="0.7.3-1"
export SUB_PROJECT_NAME="JuniperCanopy"
export APP_NAME="juniper_canopy"
export HOME_DIR="${HOME}"
export DEV_DIR_NAME="Development"
export DEV_DIR="${HOME_DIR}/${DEV_DIR_NAME}"
export LANG_DIR_NAME="${LANG_NAME}"
export LANG_DIR="${DEV_DIR}/${LANG_DIR_NAME}"
export PROJ_ROOT_DIR="${LANG_DIR}/${SUB_PROJECT_NAME}"
export PROJ_DIR="${PROJ_ROOT_DIR}/${APP_NAME}"

export LOGGING_NAME="logging"
export CONF_DIR_NAME="conf"
export SCRIPTS_DIR="util"

# export LOGGING_CONF_FILE="${HOME}/${DEVELOPMENT_DIR}/${LANGUAGE_NAME}/${JUNIPER_PROJECT_NAME}/${JUNIPER_SUB_PROJECT_NAME}/${APPLICATION_NAME}/${CONF_DIR}/${SCRIPTS_DIR}_${LOGGING_NAME}.${CONF_DIR}"
# export LOGGING_CONF_FILE="${HOME_DIR}/${DEV_DIR}/${LANG_NAME}/${SUB_PROJECT_NAME}/${APP_NAME}/${CONF_DIR}/${SCRIPTS_DIR}_${LOGGING_NAME}.${CONF_DIR}"
export LOGGING_CONF_DIR="${PROJ_DIR}/${CONF_DIR_NAME}"
# export LOGGING_CONF_FILENAME="${SCRIPTS_DIR}_${LOGGING_NAME}.${CONF_DIR_NAME}"
export LOGGING_CONF_FILENAME="${LOGGING_NAME}.${CONF_DIR_NAME}"

export LOGGING_CONF_FILE="${LOGGING_CONF_DIR}/${LOGGING_CONF_FILENAME}"
# echo "Logging Conf File: ${LOGGING_CONF_FILE}"

# echo "source \"${LOGGING_CONF_FILE}\""
source "${LOGGING_CONF_FILE}"
log_debug "Completed sourcing logging config file"


#####################################################################################################################################################################################################
# Define Global OS Name Constants
#####################################################################################################################################################################################################
export UBUNTU="Ubuntu"
export FEDORA="Fedora"
export RHEL="Red Hat"
export CENTOS="Centos"
export MACOS="Darwin"
export LINUX="Linux"
export UNKNOWN="Unknown"


#####################################################################################################################################################################################################
# Define Global Date Related Constants
#####################################################################################################################################################################################################
export BEGINNING_TIME="2023-11-27"
export ESTIMATED_FINAL_WEEK="2042-06-10"


#####################################################################################################################################################################################################
# Define Global Language Constants
#####################################################################################################################################################################################################
export RUST_LANGUAGE_NAME="rust"
export PYTHON_LANGUAGE_NAME="python"
export CPP_LANGUAGE_NAME="c++"

# export CURRENT_LANGUAGE="${RUST_LANGUAGE_NAME}"
export CURRENT_LANGUAGE="${PYTHON_LANGUAGE_NAME}"
# export CURRENT_LANGUAGE="${CPP_LANGUAGE_NAME}"


#####################################################################################################################################################################################################
# Define Global Directory Name Constants
#####################################################################################################################################################################################################
export BIN_DIR_NAME="bin"
export CONFIG_DIR_NAME="conf"
export CUDA_DIR_NAME="cuda"
export DATA_DIR_NAME="data"
export DEBUG_DIR_NAME="debug"
export DOCUMENT_DIR_NAME="docs"
export HDF5_DIR_NAME="hdf5"
export IMAGES_DIR_NAME="images"
export JUPYTER_DIR_NAME="jupyter"
export KAGGLE_DIR_NAME="kaggle"
export LIBRARY_DIR_NAME="libs"
export LOGGING_DIR_NAME="logs"
export NOTES_DIR_NAME="notes"
export PAPERS_DIR_NAME="papers"
export PROMPTS_DIR_NAME="prompts"
export PYTEST_CACHE_DIR_NAME=".pytest_cache"
export REFS_DIR_NAME="refs"
export RELEASE_DIR_NAME="release"
export RESOURCES_DIR_NAME="resources"
export SCRIPTS_DIR_NAME="scripts"
export SOURCE_DIR_NAME="src"
export TARGET_DIR_NAME="target"
export TEMP_DIR_NAME="temp"
export TORCHEXPLORER_STANDALONE_DIR_NAME="torchexplorer_standalone"
export TRUNK_DIR_NAME=".trunk"
export TRUNK_NEW_DIR_NAME=".trunk_new"
export UTILITY_DIR_NAME="util"
export VENV_DIR_NAME=".venV"
export VIZ_DIR_NAME="viz"
export VSCODE_DIR_NAME=".vscode"

export ROOT_DEVELOPMENT_DIR_NAME="Development"
export RUST_PROJECT_PARENT_DIR_NAME="rust_mudgeon"

export RUST_LANGUAGE_DIR_NAME="${RUST_LANGUAGE_NAME}/${RUST_PROJECT_PARENT_DIR_NAME}"
export PYTHON_LANGUAGE_DIR_NAME="${PYTHON_LANGUAGE_NAME}"
export CPP_LANGUAGE_DIR_NAME="${CPP_LANGUAGE_NAME}"

export RUST_PROJECT_PARENT_DIR_NAME="."
# export ROOT_PROJECT_DIR_NAME="dynamic_nn"
# export ROOT_PROJECT_DIR_NAME="juniper"
# export ROOT_PROJECT_DIR_NAME="Juniper"
export ROOT_PROJECT_DIR_NAME="${JUNIPER_APPLICATION_NAME}"


#####################################################################################################################################################################################################
# Define Global Directory Name Alias Constants
#####################################################################################################################################################################################################
export BINARY_DIR_NAME="${TARGET_DIR_NAME}"
export SCRIPT_DIR_NAME="${UTILITY_DIR_NAME}"
export OUTPUT_DIR_NAME="${DOCUMENT_DIR_NAME}"


#####################################################################################################################################################################################################
# Define Global Directory Path Constants
#####################################################################################################################################################################################################
export RUST_DEV_DIR="${DEVELOPMENT_DIR}/${RUST_LANGUAGE_DIR_NAME}"
export PYTHON_DEV_DIR="${DEVELOPMENT_DIR}/${PYTHON_LANGUAGE_DIR_NAME}"
export CPP_DEV_DIR="${DEVELOPMENT_DIR}/${CPP_LANGUAGE_DIR_NAME}"

if [[ ${CURRENT_LANGUAGE} == "${RUST_LANGUAGE_NAME}" ]]; then
    export LANGUAGE_DEV_DIR="${RUST_DEV_DIR}"
elif [[ ${CURRENT_LANGUAGE} == "${PYTHON_LANGUAGE_NAME}" ]]; then
    export LANGUAGE_DEV_DIR="${PYTHON_DEV_DIR}"
elif [[ ${CURRENT_LANGUAGE} == "${CPP_LANGUAGE_NAME}" ]]; then
    export LANGUAGE_DEV_DIR="${CPP_DEV_DIR}"
else
    log_error "Error: Unknown Language: ${CURRENT_LANGUAGE}"
fi
export ROOT_PROJECT_DIR="${LANGUAGE_DEV_DIR}/${ROOT_PROJECT_DIR_NAME}"

export ROOT_UTIL_DIR="${ROOT_PROJECT_DIR}/${UTILITY_DIR_NAME}"
export ROOT_DATA_DIR="${ROOT_PROJECT_DIR}/${DATA_DIR_NAME}"
export DEBUG_EXECUTABLE_DIR="${TARGET_DIR_NAME}/${DEBUG_DIR_NAME}"
export RELEASE_EXECUTABLE_DIR="${TARGET_DIR_NAME}/${RELEASE_DIR_NAME}"


#####################################################################################################################################################################################################
# Define Global Script Name Constants
#####################################################################################################################################################################################################
export GET_OS_SCRIPT_NAME="__get_os_name.bash"
export GET_PROJECT_SCRIPT_NAME="__get_project_dir.bash"
export DATE_FUNCTIONS_NAME="__date_functions.bash"
export ADD_CRATES_SCRIPT_NAME="add_crates.bash"
export GIT_LOG_SCRIPT_NAME="git_log_weeks.bash"


#####################################################################################################################################################################################################
# Define Global File Name Constants
#####################################################################################################################################################################################################
export SCRIPT_FILE_SUFFIX="bash"
#export SRC_FILE_SUFFIX="rs"
export SRC_FILE_SUFFIX="py"
export DATA_FILE_SUFFIX="dat"
export LOG_FILE_SUFFIX="log"
export YAML_FILE_SUFFIX="yaml"
#export CONF_FILE_SUFFIX="cfg"
export CONF_FILE_SUFFIX="conf"


#####################################################################################################################################################################################################
# Define Global File Name Constants
#####################################################################################################################################################################################################
export LOG_FILE_MODULE_NAME="juniper.${LOG_FILE_SUFFIX}"
export LOG_FILE_STARTUP_NAME="startup.${LOG_FILE_SUFFIX}"
export LOG_CONFIG_FILE_NAME="log4rs.${YAML_FILE_SUFFIX}"
export JUNIPER_CONF_FILE_NAME="juniper.${YAML_FILE_SUFFIX}"


#####################################################################################################################################################################################################
# Define Global Script Path Constants
#####################################################################################################################################################################################################
export GET_OS_SCRIPT="${ROOT_UTIL_DIR}/${GET_OS_SCRIPT_NAME}"
export GET_PROJECT_SCRIPT="${ROOT_UTIL_DIR}/${GET_PROJECT_SCRIPT_NAME}"
export ADD_CRATES_SCRIPT="${ROOT_UTIL_DIR}/${ADD_CRATES_SCRIPT_NAME}"
export GIT_LOG_SCRIPT="${ROOT_UTIL_DIR}/${GIT_LOG_SCRIPT_NAME}"
export DATE_FUNCTIONS_SCRIPT="${ROOT_UTIL_DIR}/${DATE_FUNCTIONS_NAME}"


#####################################################################################################################################################################################################
# Define Tensor Type Constants
#####################################################################################################################################################################################################
export TENSOR_DOUBLE_CPU="DOUBLE_CPU";
export TENSOR_DOUBLE_CUDA="DOUBLE_CUDA";
export TENSOR_FLOAT_CPU="FLOAT_CPU";
export TENSOR_FLOAT_CUDA="FLOAT_CUDA";


#####################################################################################################################################################################################################
# Define USB archive Constants
#####################################################################################################################################################################################################
# export USB_ARCHIVE_MOUNT_RHEL="/run/media/pcalnon"
# export USB_ARCHIVE_MOUNT_FEDORA="/run/media/pcalnon"
# export USB_ARCHIVE_MOUNT_CENTOS="/run/media/pcalnon"
export USB_ARCHIVE_MOUNT_UBUNTU="/media/pcalnon"
export USB_ARCHIVE_MOUNT_MACOS="/Volumes"

export USB_ARCHIVE_DEVICE_MACOS="Untitled"
export USB_ARCHIVE_DEVICE_LINUX_SAMSUNG_BRONZE="DFF3-2782"  # Archive USB Drive on keychain, bronze
export USB_ARCHIVE_DEVICE_LINUX_SAMSUNG_SILVER="EBC5-F0A3"  # Archive USB Drive on keychain, silver
export USB_ARCHIVE_DEVICE_LINUX_OLD_ARCHIVE="USB30FD"  # Archive USB Drive in Safe
export USB_ARCHIVE_DEVICE_LINUX_LIST="${USB_ARCHIVE_DEVICE_LINUX_SAMSUNG_BRONZE} ${USB_ARCHIVE_DEVICE_LINUX_SAMSUNG_SILVER} ${USB_ARCHIVE_DEVICE_LINUX_OLD_ARCHIVE} ${USB_ARCHIVE_DEVICE_MACOS}"

#export USB_ARCHIVE_DIR_NAME_RUST="${JUNIPER_PROJECT_NAME}_${RUST_LANGUAGE_NAME}"
#export USB_ARCHIVE_DIR_NAME_CPP="${JUNIPER_PROJECT_NAME}_${CPP_LANGUAGE_NAME}"
#export USB_ARCHIVE_DIR_NAME_PYTHON="${JUNIPER_PROJECT_NAME}_${PYTHON_LANGUAGE_NAME}"
export USB_ARCHIVE_DIR_NAME_RUST="${JUNIPER_PROJECT_NAME}-${JUNIPER_APPLICATION_VERSION}_${RUST_LANGUAGE_DIR_NAME}"
export USB_ARCHIVE_DIR_NAME_CPP="${JUNIPER_PROJECT_NAME}-${JUNIPER_APPLICATION_VERSION}_${PYTHON_LANGUAGE_DIR_NAME}"
export USB_ARCHIVE_DIR_NAME_PYTHON="${JUNIPER_PROJECT_NAME}-${JUNIPER_APPLICATION_VERSION}_${CPP_LANGUAGE_DIR_NAME}"


#####################################################################################################################################################################################################
# Define Global OS Specific Command Constants
#####################################################################################################################################################################################################
# MacOS Constants
export MACOS_DATE_COMMAND="/bin/date"
export MACOS_DATE_SWITCH="-j "
export MACOS_DATE_FORMAT="%Y-%m-%d"

export MACOS_DATE_MONTHS="m"
export MACOS_DATE_WEEKS="w"
export MACOS_DATE_DAYS="d"

# Linux Constants
export LINUX_DATE_COMMAND="/usr/bin/date"
export LINUX_DATE_SWITCH="-d"
export LINUX_DATE_FORMAT="%F"

export LINUX_DATE_MONTHS="months"
export LINUX_DATE_WEEKS="weeks"
export LINUX_DATE_DAYS="days"

#####################################################################################################################################################################################################
# Define Global OS Agnostic Command Constants
#####################################################################################################################################################################################################
export MILIS_FORMAT="%s"

return 0
