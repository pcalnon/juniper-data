#!/usr/bin/env bash
#####################################################################################################################################################################################################
# Project:       Juniper
# Sub-Project:   JuniperCanopy
# Application:   juniper_canopy
# Purpose:       Monitoring and Diagnostic Frontend for Cascade Correlation Neural Network
#
# Author:        Paul Calnon
# Version:       1.0.0
# File Name:     logging.conf
# File Path:     <Project>/<Sub-Project>/<Application>/conf/
#
# Date:          2025-11-21
# Last Modified: 2025-12-19
#
# License:       MIT License
# Copyright:     Copyright (c) 2024,2025,2026 Paul Calnon
#
# Description:
#     This script is used to perform leveled logging for the JuniperCanopy util scripts.
#
#####################################################################################################################################################################################################
# Notes:
#     WARNING:  This config file is sourced by the config files for the api_request.bash and launch_close.bash scripts.
#
#     IMPORTANT NOTE:  Don't add check for re-sourcing this file; it breaks all the things.  Control is an illusion, man; just let it happen.  The dude abides.
#     IMPORTANT NOTE:  Colors are defined in the sourced config file: log_colors.conf
#
#     This script functions as a config file and is used to perform leveled logging for the Close scripts.
#     The supported logging levels are TRACE, VERBOSE, DEBUG, INFO, WARNING, ERROR, CRITICAL, and FATAL.
#
#     Logging Levels:
#         - The TRACE level is only logged if the log level variable is set to a value <= TRACE_LEVEL, returns 0
#         - The VERBOSE level is only logged if the log level variable is set to a value <= VERBOSE_LEVEL, returns 0
#         - The DEBUG level is only logged if the log level variable is set to a value <= DEBUG_NUM or if the DEBUG environment variable is set to TRUE, returns 0
#         - The INFO level is always logged if the log level variable is set to a value <= INFO_NUM or if the DEBUG environment variable is set to TRUE, returns 0
#         - The WARNING level is always logged if the log level variable is set to a value <= WARNING_NUM or if the DEBUG environment variable is set to TRUE, returns 0
#         - The ERROR level is always logged and the script if the log level variable is set to a value <= ERROR_NUM or if the DEBUG environment variable is set to TRUE, returns 1
#         - The CRITICAL level is always logged if the log level variable is set to a value <= CRITICAL_NUM or if the DEBUG environment variable is set to TRUE, exits with 1
#         - The FATAL level is always logged if the log level variable is set to a value <= FATAL_NUM or if the DEBUG environment variable is set to TRUE, exits with 1
#
#####################################################################################################################################################################################################
# References:
#
#####################################################################################################################################################################################################
# TODO :
#
#####################################################################################################################################################################################################
# COMPLETED:
#
#####################################################################################################################################################################################################


#####################################################################################################################################################################################################
# Define General Logging Constants
#####################################################################################################################################################################################################
TRUE="0"
FALSE="1"

# DEBUG="${TRUE}"
DEBUG="${FALSE}"

export TAB_SIZE="4"


#####################################################################################################################################################################################################
# Define Available Logging Levels
#     NOTE: These need to be exported so that util functions can set their own log levels
#####################################################################################################################################################################################################
export TRACE_LEVEL=0
export VERBOSE_LEVEL=1
export DEBUG_LEVEL=2
export INFO_LEVEL=3
export WARNING_LEVEL=4
export ERROR_LEVEL=5
export CRITICAL_LEVEL=6
export FATAL_LEVEL=7


export DEFAULT_LEVEL="${TRACE_LEVEL}"       # Set default log level to TRACE
# export DEFAULT_LEVEL="${VERBOSE_LEVEL}"   # Set default log level to VERBOSE
# export DEFAULT_LEVEL="${DEBUG_LEVEL}"     # Set default log level to DEBUG
# export DEFAULT_LEVEL="${INFO_LEVEL}"      # Set default log level to INFO
# export DEFAULT_LEVEL="${WARNING_LEVEL}"   # Set default log level to WARNING
# export DEFAULT_LEVEL="${ERROR_LEVEL}"     # Set default log level to ERROR
# export DEFAULT_LEVEL="${CRITICAL_LEVEL}"  # Set default log level to CRITICAL
# export DEFAULT_LEVEL="${FATAL_LEVEL}"     # Set default log level to FATAL


#####################################################################################################################################################################################################
# Define and Source Logging Colors Config file for sourcing
#####################################################################################################################################################################################################
CONF_PATH="${PROJ_PATH}/${CONF_DIR_NAME}"
LOG_COLORS_FILE_NAME_PREFIX="log_colors"
LOG_COLORS_FILE_NAME="${LOG_COLORS_FILE_NAME_PREFIX}.${CONF_EXT}"
export LOG_COLORS_FILE="${CONF_PATH}/${LOG_COLORS_FILE_NAME}"

if [[ -f "${LOG_COLORS_FILE}" ]]; then
    source "${LOG_COLORS_FILE}"

    log_verbose "Log Colors Conf file not found: ${LOG_COLORS_FILE}"
    return $(( FALSE ))
    log_trace "Sourcing the Log Colors Conf file"
    [[ -f "${LOG_COLORS_FILE}" ]] && source "${LOG_COLORS_FILE}" || return $(( FALSE ))
fi





#####################################################################################################################################################################################################
# Validate and source the function config file
#####################################################################################################################################################################################################
if [[ -f "${COMMON_FUNCTIONS_FILE}" ]]; then
    [[ "${DEBUG}" == "${TRUE}" ]] && { echo "Running"; bash "${COMMON_FUNCTIONS_FILE}"; SUCCESS="$?"; } || { echo "Sourcing"; source "${COMMON_FUNCTIONS_FILE}"; SUCCESS="$?"; }
    log_debug "Completed sourcing Common Functions file: \"${COMMON_FUNCTIONS_FILE}\", (returned \"${SUCCESS}\")"
    [[ "${SUCCESS}" != "${TRUE}" ]] && log_critical "Failed to source Common Functions file: \"${COMMON_FUNCTIONS_FILE}\", (returned: ${SUCCESS})"
    log_debug "Successfully Completed sourcing Common Functions file: \"${COMMON_FUNCTIONS_FILE}\", (returned \"${SUCCESS}\")"
else
    MESSAGE="Common Functions File: \"${COMMON_FUNCTIONS_FILE}\" does not exist"
    CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    COLOR_FATAL="\033[1;97;41m" && RESET="\033[0m"
    printf "%b%-21s %-28s %-21s %-11s %s%b\n" "${COLOR_FATAL}" "($(date +%F_%T))" "${CALLING_SCRIPT}:${CALLING_LINE})" "${CALLING_FUNC}:" "[FATAL]" "${MESSAGE}" "${RESET}" 2>&1
    set -e; exit $(( FALSE ))
fi
echo "Common functions conf file has been sourced"






#####################################################################################################################################################################################################
# Define constants for error logging termination settings
#####################################################################################################################################################################################################
# Set Default Return Value by Logging Level Function
EXIT_TRACE="${TRUE}"
EXIT_VERBOSE="${TRUE}"
EXIT_DEBUG="${TRUE}"
EXIT_INFO="${TRUE}"
EXIT_WARNING="${TRUE}"
EXIT_ERROR="${FALSE}"
EXIT_CRITICAL="${FALSE}"
EXIT_FATAL="${FALSE}"

# Flag to determine default error handling for error-related logging: set to True if an error should terminate this application process by default.
TERM_TRACE="${FALSE}"
TERM_VERBOSE="${FALSE}"
TERM_DEBUG="${FALSE}"
TERM_INFO="${FALSE}"
TERM_WARNING="${FALSE}"
TERM_ERROR="${FALSE}"
TERM_CRITICAL="${TRUE}"
TERM_FATAL="${TRUE}"


#####################################################################################################################################################################################################
# Define Log Enviornment File Constants
#####################################################################################################################################################################################################
SCRIPT_FILE_PATH="$(dirname "$(realpath "${BASH_SOURCE[0]}")")"
PROJ_PATH="$(dirname "${SCRIPT_FILE_PATH}")"

# Define Logging file
LOGS_PATH="${PROJ_PATH}/${LOGS_DIR_NAME}"
LOG_FILE_NAME="${APP_NAME}.${LOGS_EXT}"
export LOG_FILE="${LOGS_PATH}/${LOG_FILE_NAME}"
# log_trace "Log File: ${LOG_FILE}"



#####################################################################################################################################################################################################
# Helper functions that retrieve and validate init conf, calling script, and logging environment information
#####################################################################################################################################################################################################
function get_calling_script_info() {
    SCRIPT_NAME_ID="$1"
    CALLING_PATH="$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})"
    CALLING_DIR="$(dirname ${CALLING_PATH})"
}

function get_application_info() {
    CALLING_PATH="$1"
    APP_DIR="$(dirname "${CALLING_PATH}")"
    APP_NAME="$(basename "${APP_DIR}")"
}

function get_logs_dir() {
    APP_PATH="$1"
    LOGGING_DIR_NAME="$2"
    LOG_DIR="$(dirname "${APP_PATH}")/${LOGGING_DIR_NAME}"
    [[ ! -d "${LOG_DIR}" ]] && mkdir -p "${LOG_DIR}"
}

function get_unique_log_label() {
    UNIQUE_LABEL="_$(date +%F_%T)"
}

function get_log_filename() {
    FILE_NAME="$1"
    FILE_EXT="$2"
    UNIQUE_LABEL="$3"
    LOG_FILENAME="${FILE_NAME}${UNIQUE_LABEL}.${FILE_EXT}"
}

function check_filename(){
    FILENAME="$1"
    DIR_NAME="$2"
    [[ -f "${DIR_NAME}/${FILENAME}" ]] && return $(( TRUE )) || return $(( FALSE ))
}

function get_valid_filename() {
    APP_NAME="$1"
    LOG_EXT="$2"
    LOGGING_DIR="$3"
    get_log_filename "${APP_NAME}" "${LOG_EXT}"
    if ! check_filename "${LOG_FILENAME}" "${LOGGING_DIR}"; then
        UNIQUE_LABEL="" && get_unique_log_label
        get_log_filename "${LOG_FILENAME%.*}" "${LOG_FILENAME##*.}" "${UNIQUE_LABEL}"
    fi
}

function get_log_file() {
    APP_NAME="$1"
    APP_DIR="$2"
    LOG_EXT="$3"
    LOG_DIR_NAME="$4"
    get_logs_dir "${APP_DIR}" "${LOG_DIR_NAME}"
    get_valid_filename "${APP_NAME}" "${LOG_EXT}" "${LOG_DIR}"
    LOG_FILE="${LOG_DIR}/${LOG_FILENAME}"
}

function get_log_env_info() {
    LOG_EXT="$1"
    LOGGING_DIR="$2"
    SCRIPT_NAME_ID="$3"
    get_calling_script_info "${SCRIPT_NAME_ID}"
    get_application_info "${CALLING_DIR}"
    get_log_file "${APP_NAME}" "${APP_DIR}" "${LOG_EXT}" "${LOG_DIR_NAME}"
}

function get_log_header_info() {
    SCRIPT_NAME_ID="$1"
    LINE_NO_ID="$2"
    FUNC_NAME_ID="$3"
    CALLING_PATH="$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})"
    CALLING_SCRIPT="$(basename "${CALLING_PATH}")"
    CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
}

function get_init_script_info() {
    CURRENT_SCRIPT_ID="$1"
    CURRENT_FUNC_ID="$2"
    CURRENT_PATH="$(realpath "${BASH_SOURCE[${CURRENT_SCRIPT_ID}]}")"
    CURRENT_SCRIPT="$(basename "${CURRENT_PATH}")"
    CURRENT_DIR="$(dirname "${CURRENT_PATH}")"
    CURRENT_LINE="${LINENO}"
    CURRENT_FUNC="${FUNCNAME[${CURRENT_FUNC_ID}]}"
}

function get_log_color_info() {
    export BLACK_BOLD_DARK="\033[2;90m"
    export BLACK_BOLD="\033[0;90m"
    export BLUE_BRIGHT="\033[1;34m"
    export GREEN="\033[0;32m"
    export YELLOW_BOLD="\033[0;93m"
    export RED_BRIGHT="\033[1;31m"
    export WHITE_BOLD_ON_RED="\033[0;97;41m"
    export WHITE_BOLD_BRIGHT_ON_RED="\033[1;97;41m"
    export RESET="\033[0m"
    export COLOR_TRACE="${BLACK_BOLD_DARK}"
    export COLOR_VERBOSE="${BLACK_BOLD}"
    export COLOR_DEBUG="${BLUE_BRIGHT}"
    export COLOR_INFO="${GREEN}"
    export COLOR_WARNING="${YELLOW_BOLD}"
    export COLOR_ERROR="${RED_BRIGHT}"
    export COLOR_CRITICAL="${WHITE_ON_RED}"
    export COLOR_FATAL="${WHITE_BOLD_BRIGHT_ON_RED}"
}

function get_logging_env() {
    get_log_env_info "${LOG_EXT}" "${LOGS_DIR}" "${SCRIPT_NAME_ID}"
    get_log_header_info "${SCRIPT_NAME_ID}" "${LINE_NO_ID}" "${FUNC_NAME_ID}"
    get_init_script_info "${SCRIPT_NAME_ID}" "${FUNC_NAME_ID}"
    get_log_color_info
}


#####################################################################################################################################################################################################
# Clear logs only if in Debug mode
#####################################################################################################################################################################################################
if [[ "${TRUNCATED_LOGS}" != "${TRUE}" ]]; then
    [[ "${DEBUG}" == "${TRUE}" ]] && cat /dev/null > "${LOG_FILE}"
    export TRUNCATED_LOGS="${TRUE}"
fi


#####################################################################################################################################################################################################
# Define and Source Logging Colors Config file for sourcing
#####################################################################################################################################################################################################
# CONF_EXT="conf"
# CONF_DIR_NAME="${CONF_EXT}"
# CONF_PATH="${PROJ_PATH}/${CONF_DIR_NAME}"
# LOG_COLORS_FILE_NAME_PREFIX="log_colors"
# LOG_COLORS_FILE_NAME="${LOG_COLORS_FILE_NAME_PREFIX}.${CONF_EXT}"
# export LOG_COLORS_FILE="${CONF_PATH}/${LOG_COLORS_FILE_NAME}"

# if [[ "${DEBUG}" == "${TRUE}" ]]; then
#     log_trace "Running the Log Colors Conf file: \"${LOG_COLORS_FILE}\""
#     export DEBUG
#     if [[ -f "${LOG_COLORS_FILE}" ]]; then
#         source "${LOG_COLORS_FILE}"
#     else
#         log_verbose "Log Colors Conf file not found: ${LOG_COLORS_FILE}"
#         return $(( FALSE ))
#     fi
# else
#     log_trace "Sourcing the Log Colors Conf file"
#     [[ -f "${LOG_COLORS_FILE}" ]] && source "${LOG_COLORS_FILE}" || return $(( FALSE ))
# fi
# log_trace "Completed calling the Log Colors Conf file"


#####################################################################################################################################################################################################
# Define Constants for Logging Level Colors
#####################################################################################################################################################################################################
export COLOR_TRACE="${BLACK_BOLD_DARK}"
log_verbose "Color Trace: BLACK_BOLD_DARK"
export COLOR_VERBOSE="${BLACK_BOLD}"
log_verbose "Color Verbose: BLACK_BOLD"
export COLOR_DEBUG="${BLUE_BRIGHT}"
log_verbose "Color Debug: BLUE_BRIGHT"
export COLOR_INFO="${GREEN}"
log_verbose "Color Info: GREEN"
export COLOR_WARNING="${YELLOW_BOLD}"
log_verbose "Color Warning: YELLOW_BOLD"
export COLOR_ERROR="${RED_BRIGHT}"
log_verbose "Color Error: RED_BRIGHT"
export COLOR_CRITICAL="${WHITE_ON_RED}"
log_verbose "Color Critical: WHITE_ON_RED"
export COLOR_FATAL="${WHITE_BOLD_BRIGHT_ON_RED}"
log_verbose "Color Fatal: WHITE_BOLD_BRIGHT_ON_RED"

# Create log level colors array
declare -a LOG_COLORS=("${COLOR_TRACE}" "${COLOR_VERBOSE}" "${COLOR_DEBUG}" "${COLOR_INFO}" "${COLOR_WARNING}" "${COLOR_ERROR}" "${COLOR_CRITICAL}" "${COLOR_FATAL}")

# echo "Log Colors: ${LOG_COLORS[@]}"


#####################################################################################################################################################################################################
# Define Label and Number Constants for Logging Levels
#####################################################################################################################################################################################################
TRACE_NUM=1
VERBOSE_NUM=5
DEBUG_NUM=10
INFO_NUM=20
WARNING_NUM=30
ERROR_NUM=40
CRITICAL_NUM=50
FATAL_NUM=60

declare -a LOG_LABELS=("[TRACE]" "[VERBOSE]" "[DEBUG]" "[INFO]" "[WARNING]" "[ERROR]" "[CRITICAL]" "[FATAL]")
declare -a LOG_NUMBERS=("${TRACE_NUM}" "${VERBOSE_NUM}" "${DEBUG_NUM}" "${INFO_NUM}" "${WARNING_NUM}" "${ERROR_NUM}" "${CRITICAL_NUM}" "${FATAL_NUM}")

export LOG_LEVEL="${DEFAULT_LEVEL}"         # Set log level to the default level
export LOG_LEVEL_NUM="${LOG_NUMBERS[${LOG_LEVEL}]}"

log_verbose "Log Level Num: ${LOG_LEVEL_NUM}"


#####################################################################################################################################################################################################
# Setup Environment for logging line numbers and function names
#####################################################################################################################################################################################################
SCRIPT_NAME_ID="1"
LINE_NO_ID="0"
FUNC_NAME_ID="1"

log_verbose "Script Name ID: ${SCRIPT_NAME_ID}"


#####################################################################################################################################################################################################
# # Define Logging Helper functions
#####################################################################################################################################################################################################
function logger() {
    local LOG_PARENT="${1}"
    local LOG_LINE="${2}"
    local LOG_FUNC="${3}"
    local LOG_LABEL="${4}"
    local LOG_MESSAGE="${5}"
    local LOG_COLOR="${6}"
    printf "%b%-21s %-28s %-21s %-11s %s%b\n" ${LOG_COLOR} "($(date +%F_%T))" "${LOG_PARENT}:($LOG_LINE):" "${LOG_FUNC}:" "${LOG_LABEL}" "${LOG_MESSAGE}" ${RESET} | tee -a "${LOG_FILE}" 2>&1
    return $(( TRUE ))
}

function debug_flag_matters() {
    local LOG_LEVEL_NUM="${1}"
    [[ "${DEBUG}" == "${TRUE}" ]] && (( LOG_LEVEL_NUM >= DEBUG_NUM )) && return $(( TRUE )) || return $(( FALSE ))
}

function display_level_matters() {
    local LOG_LEVEL_NUM="${1}"
    local DISPLAY_LEVEL_NUM="${2}"
    (( LOG_LEVEL_NUM <= DISPLAY_LEVEL_NUM )) && return $(( TRUE )) || return $(( FALSE ))
}

function evaluate_log_level() {
    local DISPLAY_LEVEL_NUM="${1}"
    local LOG_LEVEL_NUM="${2}"
    ( debug_flag_matters "${LOG_LEVEL_NUM}" || display_level_matters "${LOG_LEVEL_NUM}" "${DISPLAY_LEVEL_NUM}" ) && return $(( TRUE )) || return $(( FALSE ))
}


#####################################################################################################################################################################################################
# Define custom level logging functions
#####################################################################################################################################################################################################
log_debug "Define level logging functions"

function global_log_trace() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_TRACE}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_TRACE}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${TRACE_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${TRACE_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${LOG_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_verbose() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_VERBOSE}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_VERBOSE}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${VERBOSE_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${VERBOSE_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${LOG_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_debug() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_DEBUG}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_DEBUG}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${DEBUG_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${DEBUG_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${LOG_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_info() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_INFO}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_INFO}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${INFO_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${INFO_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${INFO_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_warning() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_WARNING}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_WARNING}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${WARNING_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${WARNING_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${WARNING_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_error() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_ERROR}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_ERROR}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${ERROR_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${ERROR_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${ERROR_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_critical() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_CRITICAL}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_CRITICAL}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${CRITICAL_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${CRITICAL_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${CRITICAL_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

function global_log_fatal() {
    local MESSAGE="$1"
    [[ "$2" == "" ]] && EXIT_STATUS="${EXIT_FATAL}" || EXIT_STATUS="$2"
    [[ "$3" == "" ]] && TERM_STATUS="${TERM_FATAL}" || TERM_STATUS="$3"
    # echo "ExitStatus: ${EXIT_STATUS}"
    # echo "TermStatus: ${TERM_STATUS}"
    evaluate_log_level "${FATAL_NUM}" "${LOG_NUMBERS[${LOG_LEVEL}]}" || return $(( EXIT_STATUS ))
    local CALLING_SCRIPT="$(basename "$(realpath ${BASH_SOURCE[${SCRIPT_NAME_ID}]})")"
    local CALLING_LINE="${BASH_LINENO[${LINE_NO_ID}]}"
    local CALLING_FUNC="${FUNCNAME[${FUNC_NAME_ID}]}"
    local COLOR_CODE="${LOG_COLORS[${FATAL_LEVEL}]}"
    local LOG_LABEL="${LOG_LABELS[${FATAL_LEVEL}]}"
    logger "${CALLING_SCRIPT}" "${CALLING_LINE}" "${CALLING_FUNC}" "${LOG_LABEL}" "${MESSAGE}" "${COLOR_CODE}"
    [[ "${TERM_STATUS}" == "${TRUE}" ]] && set -e && exit $(( EXIT_STATUS ))
    [[ "${DEBUG}" == "${TRUE}" ]] && exit $(( EXIT_STATUS )) || return $(( EXIT_STATUS ))
}

log_trace "Completed Defining custom level logging functions"


#####################################################################################################################################################################################################
# Set the tab size for the logging functions
#####################################################################################################################################################################################################
export tabs="${TAB_SIZE}"


#####################################################################################################################################################################################################
# Export logging functions to calling script
#####################################################################################################################################################################################################
log_debug "Exporting logging functions to calling script"

export -f global_log_trace
export -f global_log_verbose
export -f global_log_debug
export -f global_log_info
export -f global_log_warning
export -f global_log_error
export -f global_log_critical
export -f global_log_fatal

log_trace "Completed Exporting logging functions to calling script"

if [[ "${DEBUG}" == "${TRUE}" ]]; then
    log_trace "Testing Logging Function Colors"

    global_log_trace     "Logging functions exported: I am Trace!"
    global_log_verbose   "Logging functions exported: I am Verbose!"
    global_log_debug     "Logging functions exported: I am Debug!"
    global_log_info      "Logging functions exported: I am Info!"
    global_log_warning   "Logging functions exported: I am Warning!"
    global_log_error     "Logging functions exported: I am Error!"    "${TRUE}" "${FALSE}"  # These extra params cause the log function to return "${TRUE}" and not terminate
    global_log_critical  "Logging functions exported: I am Critical!" "${TRUE}" "${FALSE}"  # These extra params cause the log function to return "${TRUE}" and not terminate
    global_log_fatal     "Logging functions exported: I am Fatal!"    "${TRUE}" "${FALSE}"  # These extra params cause the log function to return "${TRUE}" and not terminate

    log_trace "Completed Testing Logging Function Colors"
fi

log_trace "Completed Logging Function Export Test"

log_verbose "Debug: ${DEBUG}"
log_verbose "True: ${TRUE}"
log_verbose "False: ${FALSE}"

[[ "${DEBUG}" == "${TRUE}" ]] && exit $(( TRUE )) || return $(( TRUE ))
