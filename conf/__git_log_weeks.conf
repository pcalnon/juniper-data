#!/usr/bin/env bash
#####################################################################################################################################################################################################
# Project:       Juniper
# Sub-Project:   JuniperData
# Application:   juniper_data
# Purpose:       Juniper Project Cascade Correlation Neural Network
#
# Author:        Paul Calnon
# Version:       1.0.0
# File Name:     __git_log_weeks.conf
# File Path:     <Project>/<Sub-Project>/<Application>/conf/
#
# Date Created:  2025-12-31
# Last Modified: 2026-01-12
#
# License:       MIT License
# Copyright:     Copyright (c) 2024,2025,2026 Paul Calnon
#
# Description:
#     Configuration file for the __git_log_weeks.bash script.
#     This script provides git log functionality with weekly grouping.
#     Most configuration is inherited from common.conf and date_functions.conf.
#
#####################################################################################################################################################################################################
# Notes:
#
#####################################################################################################################################################################################################
# References:
#
#####################################################################################################################################################################################################
# TODO :
#
#####################################################################################################################################################################################################
# COMPLETED:
#
#####################################################################################################################################################################################################


#####################################################################################################################################################################################################
# Check if this config file has already been sourced
#####################################################################################################################################################################################################
if [[ "${GIT_LOG_WEEKS_CONF_SOURCED}" != "${TRUE}" ]]; then
    GIT_LOG_WEEKS_CONF_SOURCED="${TRUE}"
else
    log_warning "__git_log_weeks.conf already sourced.  Skipping re-source."
    return $(( TRUE ))
fi


#####################################################################################################################################################################################################
# Define constants for script
#####################################################################################################################################################################################################
# shellcheck disable=SC2155
export SCRIPT_PATH="$(realpath "${BASH_SOURCE[0]}")"
# shellcheck disable=SC2155
export SCRIPT_NAME="$(basename "${SCRIPT_PATH}")"
# shellcheck disable=SC2155
export SCRIPT_DIR="$(dirname "${SCRIPT_PATH}")"


#####################################################################################################################################################################################################
# Define Script Function Name Constants
#####################################################################################################################################################################################################
# shellcheck disable=SC2155
export DATE_FUNCTIONS_FILE_NAME_PREFIX="__"
# shellcheck disable=SC2155
export DATE_FUNCTIONS_FILE_NAME_ROOT="date"
# shellcheck disable=SC2155
export DATE_FUNCTIONS_FILE_NAME_INFIX="_functions"
# shellcheck disable=SC2155
export DATE_FUNCTIONS_FILE_PREFIX="${DATE_FUNCTIONS_FILE_NAME_PREFIX}${DATE_FUNCTIONS_FILE_NAME_ROOT}${DATE_FUNCTIONS_FILE_NAME_INFIX}"

# shellcheck disable=SC2155
export DATE_FUNCTIONS_SCRIPT_NAME="${DATE_FUNCTIONS_FILE_PREFIX}.${CONF_EXT}"
# shellcheck disable=SC2155
export DATE_FUNCTIONS_SCRIPT="${CONF_DIR}/${DATE_FUNCTIONS_SCRIPT_NAME}"


#####################################################################################################################################################################################################
# Source the Date Functions config file
#####################################################################################################################################################################################################
# shellcheck disable=SC1090
log_trace "Validating the Date Functions script: \"${DATE_FUNCTIONS_SCRIPT}\""
[[ "${DATE_FUNCTIONS_SCRIPT}" == "" || ! -f "${DATE_FUNCTIONS_SCRIPT}" ]] && log_fatal "Date Functions script not found: \"${DATE_FUNCTIONS_SCRIPT}\""
log_trace "Sourcing the Date Functions script: \"${DATE_FUNCTIONS_SCRIPT}\""
source "${DATE_FUNCTIONS_SCRIPT}"; SUCCESS="$?"
log_trace "Completed Sourcing the Date Functions script: \"${DATE_FUNCTIONS_SCRIPT}\""
[[ "${SUCCESS}" != "${TRUE}" ]] && log_fatal "Failed attempt to source Date Functions script: \"${DATE_FUNCTIONS_SCRIPT}\" (Returned \"${SUCCESS}\")"
log_trace "Date Functions script sourced successfully: \"${DATE_FUNCTIONS_SCRIPT}\" (Returned \"${SUCCESS}\")"


#####################################################################################################################################################################################################
# Define local Script Constants
#####################################################################################################################################################################################################
export BASE_DIR="${PROJ_DIR}"

export CURRENT_OS=$(${GET_OS_SCRIPT})

export PAST_WEEKS="1"
export START_INTERVAL_NUM="-6"
export END_INTERVAL_NUM="-1"
export START_TIME="00:00:00"
export END_TIME="23:59:59"

if [[ ${CURRENT_OS} == "${MACOS}" ]]; then
    export INTERVAL_TYPE="${MACOS_DATE_DAYS}"
else
    export INTERVAL_TYPE="${LINUX_DATE_DAYS}"
fi

return $(( TRUE ))
